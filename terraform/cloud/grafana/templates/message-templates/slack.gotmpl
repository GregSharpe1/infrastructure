{{ define "slack_alert_message" }}
  {{ if gt (len .Alerts.Firing) 0 }}
    {{ range .Alerts.Firing }} {{ template "slack_alert_firing" . }} {{ end }}
  {{ end }}
  {{ if gt (len .Alerts.Resolved) 0 }}
   {{ range .Alerts.Resolved }} {{ template "slack_alert_resolved" . }} {{ end }}
  {{ end }}
{{ end }}

{{ define "slack_alert_message_title" }}
  {{ if gt (len .Alerts.Firing) 0 }}
  ðŸ”¥ {{ len .Alerts.Firing }} alert(s) firing.
  {{ end }}

  {{ if gt (len .Alerts.Resolved) 0 }}
  âœ… {{ len .Alerts.Resolved }} alert(s) resolved.
  {{ end }}
{{ end }}

{{ define "slack_alert_firing" }}
  {{ if .Labels.alertname }}*Firing*: {{ .Labels.alertname }} {{ end }}

  {{ if .Annotations.summary }}*Summary:* {{ .Annotations.summary }} {{ end }}
  {{ if .Annotations.description }}*Description:* {{ .Annotations.description }} {{ end }}

  {{ if .Annotations.dashboard_url }}ðŸ“Š <{{ .Annotations.dashboard_url }}|Dashboard URL> {{ end }}{{ if .Annotations.runbook_url }}*|* ðŸ—Ž <{{ .Annotations.runbook_url }}|Runbook URL> {{ end }}
  ðŸ”• <{{ .SilenceURL }}|Silence>
  {{ if .GeneratorURL }}ðŸš¨ <{{ .GeneratorURL }}|Alert> {{ end }}
{{ end }}

{{ define "slack_alert_resolved" }}
  {{ if .Labels.alertname }}*Resolved*: {{ .Labels.alertname }} {{ end }}
{{ end }}
